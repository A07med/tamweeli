<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ุชููููู | ุทูุจ ุชูููู</title>
  <meta name="description" content="ุฃุฑุณู ุจูุงูุงุช ุดุฑูุชู ูุทูุจ ุชูููู ุนุจุฑ ููุตุฉ ุชููููู.">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop stop-color='%2357a36c'/%3E%3Cstop offset='1' stop-color='%233b7a4e'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='46' fill='%23141616' stroke='%2399b79e'/%3E%3Cpath d='M25,60 C40,40 60,40 75,60' stroke='url(%23g)' stroke-width='10' fill='none' stroke-linecap='round'/%3E%3C/svg%3E">
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>
<body>
  <header class="navbar">
    <div class="nav-inner">
      <a class="brand" href="index.html">
        <span class="brand-ar">ุชููููู</span>
        <span class="brand-en">TAMWEELI</span>
      </a>
      <nav class="nav-links" aria-label="ุฑูุงุจุท ุฑุฆูุณูุฉ">
        <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
        <a href="Aboutus.html">ูู ูุญู</a>
        <a class="active" href="funding.html">ุงูุชูููู</a>
        <a href="invoices.html">ุงููุณุชุซูุฑูู</a>
      </nav>
    </div>
  </header>

  <main class="content">
    <h1>ุทูุจ ุชูููู ููุดุฑูุงุช</h1>
    <p>ุงููุฃ ุงููููุฐุฌ ุงูุชุงูู ุจุงูุจูุงูุงุช ุงููุทููุจุฉ ูุณูุชูุงุตู ูุนู ุจุนุฏ ูุฑุงุฌุนุฉ ุงูุทูุจ ูุงูุชุญูู ูู ุงููุณุชูุฏุงุช.</p>

    <form id="fundingForm" novalidate enctype="multipart/form-data">
      <div class="form-row">
        <div>
          <label for="companyName">ุงุณู ุงูุดุฑูุฉ</label>
          <input id="companyName" name="companyName" required placeholder="ูุซุงู: ุดุฑูุฉ ุงููุฌุงุญ ููุชุฌุงุฑุฉ">
        </div>
        <div>
          <label for="crNumber">ุฑูู ุงูุณุฌู ุงูุชุฌุงุฑู</label>
          <input id="crNumber" name="crNumber" required pattern="^[0-9\-]{5,}$" placeholder="ูุซุงู: 1234567890">
        </div>
      </div>

      <div class="form-row">
        <div>
          <label for="contactName">ุงุณู ุงููุณุคูู</label>
          <input id="contactName" name="contactName" required placeholder="ุงุณู ุงูุดุฎุต ููุชูุงุตู">
        </div>
        <div>
          <label for="phone">ุงููุงุชู</label>
          <input id="phone" name="phone" type="tel" required pattern="^[0-9\+\s\-]{8,}$" placeholder="96XXXXXXXX">
        </div>
      </div>

      <div class="form-row">
        <div>
          <label for="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
          <input id="email" name="email" type="email" required placeholder="example@company.com">
        </div>
        <div>
          <label for="amount">ูููุฉ ุงูุชูููู ุงููุทููุจุฉ (ุจุงูุนููุฉ ุงููุญููุฉ)</label>
          <input id="amount" name="amount" type="number" min="" max="30000" step="1000" required placeholder=" ุงูุญุฏ ุงูุฃูุตู 30,000">
          <div class="file-info" style="margin-top: 4px;">ุงูุญุฏ ุงูุฃูุตู ููุชูููู: 30,000 ุฑูุงู ุนูุงูู</div>
        </div>
      </div>

      <div class="form-row">
        <div>
          <label for="purpose">ุบุฑุถ ุงูุชูููู</label>
          <select id="purpose" name="purpose" required>
            <option value="">ุงุฎุชุฑ...</option>
            <option>ุชูููู ุนููุฏ</option>
          </select>
        </div>
        <div>
          <label for="age">ุนูุฑ ุงูุดุฑูุฉ (ุจุงูุณููุงุช)</label>
          <input id="age" name="age" type="number" min="0" step="1" required placeholder="ูุซุงู: 3">
        </div>
      </div>

      <div>
        <label for="notes">ูุจุฐุฉ ุนู ุดุฑูุชูู ูุงุญุชูุงุฌูู</label>
        <textarea id="notes" name="notes" placeholder="ุฃุฎุจุฑูุง ุจุฅูุฌุงุฒ ุนู ูุดุงุทูู ูุณุจุจ ุงุญุชูุงุฌ ุงูุชูููู."></textarea>
      </div>

      <div>
        <label for="contractFile">ุฑูุน ุงูุนูุฏ (PDFุ ุตูุฑุฉุ ุฃู ูุณุชูุฏ)</label>
        <input id="contractFile" name="contractFile" type="file" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" required>
        <div class="file-info">ููููู ุฑูุน ููู PDF ุฃู ุตูุฑุฉ ุฃู ูุณุชูุฏ Word</div>
      </div>

      <div class="form-actions">
        <button class="btn btn-primary" type="submit" id="submitBtn">ุฅุฑุณุงู ุงูุทูุจ</button>
        <button class="btn" type="reset">ูุณุญ</button>
      </div>
    </form>
  </main>

  <footer>
    <div class="footer-inner">
      <div class="footer-content">
        <div class="footer-brand">
          <strong>ุชููููู</strong>
          <p>ูุณุนุฏ ุจุฎุฏูุชูู.</p>
        </div>
        <div class="footer-contact">
          <p><strong>ุชูุงุตู ูุนูุง:</strong></p>
          <p>
            <a href="tel:99999999">๐ 99999999</a>
          </p>
          <p>
            <a href="mailto:example@gmail.com">๐ง example@gmail.com</a>
          </p>
        </div>
      </div>
      <nav class="quick-links" aria-label="ุฑูุงุจุท ุณุฑูุนุฉ">
        <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
        <a href="Aboutus.html">ูู ูุญู</a>
        <a href="funding.html">ุงูุชูููู</a>
        <a href="invoices.html">ุงููุณุชุซูุฑูู</a>
      </nav>
    </div>
  </footer>

  <script src="assets/script.js"></script>
  <script>
    // ุชููุฆุฉ EmailJS
    // ูุฑุฌู ุงุณุชุจุฏุงู 'YOUR_PUBLIC_KEY' ุจููุชุงุญู ุงูุนุงู ูู EmailJS
    (function(){
      emailjs.init("exTjee9VKEbHnfoLF"); // ุงุณุชุจุฏู ูุฐุง ุจููุชุงุญู ุงูุนุงู ูู EmailJS
    })();

    const form = document.getElementById('fundingForm');
    const fileInput = document.getElementById('contractFile');
    const submitBtn = document.getElementById('submitBtn');
    const amountInput = document.getElementById('amount');
    
    // ุงูุชุญูู ูู ุงูุญุฏ ุงูุฃูุตู ููุชูููู
    amountInput.addEventListener('input', function(e) {
      const value = parseFloat(e.target.value);
      if (value > 30000) {
        e.target.setCustomValidity('ุงูุญุฏ ุงูุฃูุตู ููุชูููู ูู 30,000 ุฑูุงู ุนูุงูู');
        e.target.value = 30000;
      } else {
        e.target.setCustomValidity('');
      }
    });
    
    amountInput.addEventListener('blur', function(e) {
      const value = parseFloat(e.target.value);
      if (value > 30000) {
        e.target.value = 30000;
        alert('ุงูุญุฏ ุงูุฃูุตู ููุชูููู ูู 30,000 ุฑูุงู ุนูุงูู. ุชู ุชุนุฏูู ุงููููุฉ ุชููุงุฆูุงู.');
      }
    });
    
    // ุนุฑุถ ุงุณู ุงูููู ุงููุฑููุน
    fileInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        const fileInfo = fileInput.nextElementSibling;
        const maxSize = 10 * 1024 * 1024; // 10MB
        if (file.size > maxSize) {
          alert('ุญุฌู ุงูููู ูุจูุฑ ุฌุฏุงู. ุงูุญุฏ ุงูุฃูุตู 10 ููุฌุงุจุงูุช.');
          e.target.value = '';
          fileInfo.textContent = 'ููููู ุฑูุน ููู PDF ุฃู ุตูุฑุฉ ุฃู ูุณุชูุฏ Word';
        } else {
          fileInfo.textContent = `ุชู ุงุฎุชูุงุฑ: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)`;
          fileInfo.style.color = 'var(--accent)';
        }
      }
    });

    form.addEventListener('submit', async function(e){
      e.preventDefault();
      if (!form.checkValidity()) {
        alert('ูุถูุงู ุฃููู ุงูุญููู ุงููุทููุจุฉ ุจุดูู ุตุญูุญ.');
        return;
      }
      
      const formData = new FormData(form);
      const file = fileInput.files[0];
      const amount = parseFloat(amountInput.value);
      
      if (!file) {
        alert('ูุถูุงู ูู ุจุฑูุน ุงูุนูุฏ.');
        return;
      }
      
      // ุงูุชุญูู ุงูููุงุฆู ูู ุงูุญุฏ ุงูุฃูุตู
      if (amount > 30000) {
        alert('ุงูุญุฏ ุงูุฃูุตู ููุชูููู ูู 30,000 ุฑูุงู ุนูุงูู. ูุฑุฌู ุชุนุฏูู ุงููุจูุบ.');
        amountInput.value = 30000;
        amountInput.focus();
        return;
      }
      
      // ุชุนุทูู ุงูุฒุฑ ุฃุซูุงุก ุงูุฅุฑุณุงู
      submitBtn.disabled = true;
      submitBtn.textContent = 'ุฌุงุฑู ุงูุฅุฑุณุงู...';
      
      try {
        // ุชุญุถูุฑ ุจูุงูุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
        const emailData = {
          company_name: formData.get('companyName'),
          cr_number: formData.get('crNumber'),
          contact_name: formData.get('contactName'),
          phone: formData.get('phone'),
          email: formData.get('email'),
          amount: formData.get('amount'),
          purpose: formData.get('purpose'),
          company_age: formData.get('age'),
          notes: formData.get('notes') || '(ูู ูุชู ุฅุฏุฎุงู ููุงุญุธุงุช)',
          file_name: file.name,
          file_size: `${(file.size / 1024 / 1024).toFixed(2)} MB`,
          file_type: file.type,
          submission_date: new Date().toLocaleString('ar-SA', { 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric', 
            hour: '2-digit', 
            minute: '2-digit' 
          })
        };

        // ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุนุจุฑ EmailJS
        // ุงุณุชุจุฏู 'YOUR_SERVICE_ID' ู 'YOUR_TEMPLATE_ID' ุจูููู ูู EmailJS
        await emailjs.send(
          'service_9ghkxlb',    // ุงุณุชุจุฏู ุจูุนุฑู ุงูุฎุฏูุฉ ูู EmailJS
          'template_jve82ww',   // ุงุณุชุจุฏู ุจูุนุฑู ุงููุงูุจ ูู EmailJS
          emailData
        );
        
        alert('ุชู ุฅุฑุณุงู ุทูุจู ุจูุฌุงุญ! ุณูุชู ุงูุชูุงุตู ูุนู ูุฑูุจุงู.');
        form.reset();
        fileInput.nextElementSibling.textContent = 'ููููู ุฑูุน ููู PDF ุฃู ุตูุฑุฉ ุฃู ูุณุชูุฏ Word';
        fileInput.nextElementSibling.style.color = '';
        
      } catch (error) {
        console.error('ุฎุทุฃ ูู ุฅุฑุณุงู ุงูุจุฑูุฏ:', error);
        alert('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุฑุณุงู ุงูุทูุจ. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู ุฃู ุงูุชูุงุตู ูุนูุง ูุจุงุดุฑุฉ.');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'ุฅุฑุณุงู ุงูุทูุจ';
      }
    });
  </script>
</body>
</html>


